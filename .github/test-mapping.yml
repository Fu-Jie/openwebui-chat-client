# Configuration file mapping source code files/directories to integration test categories
# This is used by GitHub Actions to run only relevant integration tests for changed files
#
# ğŸ“‹ ä½¿ç”¨è¯´æ˜:
# 1. æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåœ¨ file_mappings ä¸­æ·»åŠ å¯¹åº”çš„æ–‡ä»¶æ¨¡å¼å’Œæµ‹è¯•ç±»åˆ«
# 2. æ–‡ä»¶æ¨¡å¼æ”¯æŒ glob è¯­æ³• (**, *, ?)
# 3. ä¸€ä¸ªæ–‡ä»¶æ¨¡å¼å¯ä»¥æ˜ å°„åˆ°å¤šä¸ªæµ‹è¯•ç±»åˆ«
# 4. æµ‹è¯•ç±»åˆ«å¿…é¡»åœ¨ test_categories ä¸­é¢„å…ˆå®šä¹‰

# Integration test categories and their corresponding test commands
test_categories:
  notes_api:
    name: "Notes API Integration Test"
    command: "python examples/notes_api/basic_notes.py"
    description: "Tests notes CRUD operations and API functionality"

  prompts_api:
    name: "Prompts API Integration Test"
    command: "python examples/prompts_api/basic_prompts.py"
    description: "Tests prompts CRUD operations, variables, and management functionality"

  basic_chat:
    name: "Basic Usage Integration Test"
    command: "python examples/getting_started/basic_chat.py"
    description: "Tests basic chat functionality and client initialization"

  rag_integration:
    name: "RAG Integration Test"
    command: "python examples/rag_knowledge/file_rag.py"
    description: "Tests RAG (Retrieval Augmented Generation) with files"

  model_management:
    name: "Model Management Integration Test"
    command: "python examples/model_management/model_operations.py"
    description: "Tests model CRUD operations and management"

  model_switching:
    name: "Model Switch Integration Test"
    command: "python examples/chat_features/model_switching.py"
    description: "Tests model switching functionality in existing chats"

  comprehensive_demos:
    name: "Comprehensive Demos Test"
    command: "python examples/getting_started/quick_start.py"
    description: "Tests comprehensive feature integration and workflows"

  connectivity:
    name: "Basic Connectivity Test"
    command: 'python -c "from openwebui_chat_client import OpenWebUIClient; import os; import sys; client = OpenWebUIClient(os.getenv(''OUI_BASE_URL''), os.getenv(''OUI_AUTH_TOKEN''), os.getenv(''OUI_DEFAULT_MODEL'')); models = client.list_models(); print(f''âœ… Connected. Found {len(models) if models else 0} models.'') if models is not None else sys.exit(1)"'
    description: "Tests basic client connectivity and authentication"

  continuous_conversation:
    name: "Continuous Conversation Integration Test"
    command: "python examples/advanced_features/continuous_conversation.py"
    description: "Tests continuous conversation features including multi-turn dialogues, follow-up suggestions, and advanced conversation management"

  deep_research:
    name: "Deep Research Agent Integration Test"
    command: "python examples/advanced_features/deep_research_example.py"
    description: "Tests the autonomous deep research agent with intelligent model routing"

  process_task:
    name: "Process Task Agent Integration Test"
    command: "python examples/advanced_features/process_task_example.py"
    description: "Tests the autonomous task processing agent with multi-step agentic loop"

  stream_process_task:
    name: "Stream Process Task Integration Test"
    command: "python examples/advanced_features/stream_process_task_example.py"
    description: "Tests the streaming version of the task processing agent"

  decision_model:
    name: "Decision Model Integration Test"
    command: "python examples/integration/test_integration_decision_model.py"
    description: "Tests the decision model feature for automatic option selection in autonomous task processing"

  async_basic_chat:
    name: "Async Basic Usage Integration Test"
    command: "python examples/getting_started/async_basic_chat.py"
    description: "Tests async client basic functionality including async chat, streaming, and concurrent operations"

  async_streaming_chat:
    name: "Async Streaming Chat Integration Test"
    command: "python examples/chat_features/async_streaming_chat.py"
    description: "Tests async streaming chat with timing analysis and concurrent streaming sessions"

  async_model_operations:
    name: "Async Model Operations Integration Test"
    command: "python examples/model_management/async_model_operations.py"
    description: "Tests async model listing, categorization, and batch model operations"

  async_live_client:
    name: "Async Live Client Integration Test"
    command: "python examples/integration/test_integration_async_client_live.py"
    description: "Live async client smoke: list_models and chat"

  async_live_stream:
    name: "Async Live Streaming Integration Test"
    command: "python examples/integration/test_integration_async_stream_chat.py"
    description: "Live async streaming chat smoke"

  async_live_model_ops:
    name: "Async Live Model Ops Integration Test"
    command: "python examples/integration/test_integration_async_model_ops.py"
    description: "Live async model list and detail fetch"

  sync_live_client:
    name: "Sync Live Client Integration Test"
    command: "python examples/integration/test_integration_openwebui_chat_client.py"
    description: "Live sync client smoke: chat and model CRUD"

  sync_live_stream:
    name: "Sync Live Streaming Integration Test"
    command: "python examples/integration/test_integration_sync_stream_chat.py"
    description: "Live sync streaming chat smoke"

# File patterns mapped to test categories
# When files matching these patterns change, the corresponding tests will run
# 
# ğŸ¯ æ˜ å°„ä¼˜å…ˆçº§è§„åˆ™:
# 1. å…·ä½“æ–‡ä»¶è·¯å¾„ä¼˜å…ˆäºé€šé…ç¬¦æ¨¡å¼
# 2. æ›´é•¿çš„è·¯å¾„æ¨¡å¼ä¼˜å…ˆäºæ›´çŸ­çš„è·¯å¾„æ¨¡å¼
# 3. æ¨¡å—ç‰¹å®šçš„æ˜ å°„ä¼˜å…ˆäºé€šç”¨çš„æ˜ å°„
# 4. æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºåŒ¹é…ï¼Œæ‰€æœ‰åŒ¹é…çš„ç±»åˆ«éƒ½ä¼šè¢«æ”¶é›†
#
# ğŸ“ æœ€ä½³å®è·µ:
# - å°†æœ€å…·ä½“çš„æ¨¡å¼æ”¾åœ¨å‰é¢
# - é¿å…è¿‡åº¦è§¦å‘æµ‹è¯•ï¼ˆç²¾ç¡®æ˜ å°„ï¼‰
# - ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å˜æ›´æœ‰è¶³å¤Ÿçš„æµ‹è¯•è¦†ç›–
file_mappings:
  # ============================================================================
  # 1. æ ¸å¿ƒå®¢æˆ·ç«¯æ–‡ä»¶ - ç²¾ç¡®æ˜ å°„
  # ============================================================================
  
  # åŒæ­¥å®¢æˆ·ç«¯ä¸»æ–‡ä»¶
  - pattern: "openwebui_chat_client/openwebui_chat_client.py"
    categories:
      - "connectivity"
      - "basic_chat"
      - "model_management"
      - "sync_live_client"
      - "sync_live_stream"
    description: "Sync client main file - triggers core sync tests"

  # å¼‚æ­¥å®¢æˆ·ç«¯ä¸»æ–‡ä»¶
  - pattern: "openwebui_chat_client/async_openwebui_client.py"
    categories:
      - "connectivity"
      - "async_basic_chat"
      - "async_streaming_chat"
      - "async_model_operations"
      - "async_live_client"
      - "async_live_stream"
      - "async_live_model_ops"
    description: "Async client main file - triggers core async tests"

  # ============================================================================
  # 2. æ ¸å¿ƒåŸºç¡€ç±» - ç²¾ç¡®æ˜ å°„
  # ============================================================================
  
  # åŒæ­¥åŸºç¡€å®¢æˆ·ç«¯
  - pattern: "openwebui_chat_client/core/base_client.py"
    categories:
      - "connectivity"
      - "basic_chat"
      - "sync_live_client"
    description: "Sync base client - triggers basic sync connectivity tests"

  # å¼‚æ­¥åŸºç¡€å®¢æˆ·ç«¯
  - pattern: "openwebui_chat_client/core/async_base_client.py"
    categories:
      - "connectivity"
      - "async_basic_chat"
      - "async_live_client"
    description: "Async base client - triggers basic async connectivity tests"

  # ============================================================================
  # 3. æ¨¡å—ç®¡ç†å™¨ - ç²¾ç¡®æ˜ å°„åˆ°ç›¸å…³åŠŸèƒ½
  # ============================================================================
  
  # èŠå¤©ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/chat_manager.py"
    categories:
      - "basic_chat"
      - "model_switching"
      - "continuous_conversation"
    description: "Sync chat manager - triggers chat-related tests"

  # èŠå¤©ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_chat_manager.py"
    categories:
      - "async_basic_chat"
      - "async_streaming_chat"
    description: "Async chat manager - triggers async chat tests"

  # æ¨¡å‹ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/model_manager.py"
    categories:
      - "model_management"
      - "connectivity"
    description: "Sync model manager - triggers model management tests"

  # æ¨¡å‹ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_model_manager.py"
    categories:
      - "async_model_operations"
    description: "Async model manager - triggers async model tests"

  # ç¬”è®°ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/notes_manager.py"
    categories:
      - "notes_api"
    description: "Sync notes manager - triggers notes API tests"

  # ç¬”è®°ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_notes_manager.py"
    categories:
      - "notes_api"
    description: "Async notes manager - triggers notes API tests"

  # Promptsç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/prompts_manager.py"
    categories:
      - "prompts_api"
    description: "Sync prompts manager - triggers prompts API tests"

  # Promptsç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_prompts_manager.py"
    categories:
      - "prompts_api"
    description: "Async prompts manager - triggers prompts API tests"

  # çŸ¥è¯†åº“ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/knowledge_base_manager.py"
    categories:
      - "rag_integration"
    description: "Sync knowledge base manager - triggers RAG tests"

  # çŸ¥è¯†åº“ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_knowledge_base_manager.py"
    categories:
      - "rag_integration"
    description: "Async knowledge base manager - triggers RAG tests"

  # æ–‡ä»¶ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/file_manager.py"
    categories:
      - "rag_integration"
    description: "Sync file manager - triggers RAG tests"

  # æ–‡ä»¶ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_file_manager.py"
    categories:
      - "rag_integration"
    description: "Async file manager - triggers RAG tests"

  # ç”¨æˆ·ç®¡ç†å™¨ï¼ˆåŒæ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/user_manager.py"
    categories:
      - "connectivity"
    description: "Sync user manager - triggers basic connectivity tests"

  # ç”¨æˆ·ç®¡ç†å™¨ï¼ˆå¼‚æ­¥ï¼‰
  - pattern: "openwebui_chat_client/modules/async_user_manager.py"
    categories:
      - "connectivity"
    description: "Async user manager - triggers basic connectivity tests"

  # ============================================================================
  # 4. ç¤ºä¾‹æ–‡ä»¶ - ç²¾ç¡®æ˜ å°„åˆ°å¯¹åº”æµ‹è¯•
  # ============================================================================
  
  # Getting Started ç¤ºä¾‹
  - pattern: "examples/getting_started/basic_chat.py"
    categories:
      - "basic_chat"
    description: "Basic chat example - triggers basic chat test"

  - pattern: "examples/getting_started/async_basic_chat.py"
    categories:
      - "async_basic_chat"
    description: "Async basic chat example - triggers async basic chat test"

  - pattern: "examples/getting_started/quick_start.py"
    categories:
      - "comprehensive_demos"
    description: "Quick start example - triggers comprehensive demo test"

  - pattern: "examples/getting_started/hello_world.py"
    categories:
      - "connectivity"
    description: "Hello world example - triggers connectivity test"

  # Chat Features ç¤ºä¾‹
  - pattern: "examples/chat_features/model_switching.py"
    categories:
      - "model_switching"
    description: "Model switching example - triggers model switching test"

  - pattern: "examples/chat_features/streaming_chat.py"
    categories:
      - "sync_live_stream"
    description: "Sync streaming chat example - triggers sync streaming test"

  - pattern: "examples/chat_features/async_streaming_chat.py"
    categories:
      - "async_streaming_chat"
    description: "Async streaming chat example - triggers async streaming test"

  # Advanced Features ç¤ºä¾‹
  - pattern: "examples/advanced_features/continuous_conversation.py"
    categories:
      - "continuous_conversation"
    description: "Continuous conversation example - triggers continuous conversation test"

  - pattern: "examples/advanced_features/deep_research_example.py"
    categories:
      - "deep_research"
    description: "Deep research example - triggers deep research test"

  - pattern: "examples/advanced_features/process_task_example.py"
    categories:
      - "process_task"
    description: "Process task example - triggers process task test"

  - pattern: "examples/advanced_features/stream_process_task_example.py"
    categories:
      - "stream_process_task"
    description: "Stream process task example - triggers stream process task test"

  # Model Management ç¤ºä¾‹
  - pattern: "examples/model_management/model_operations.py"
    categories:
      - "model_management"
    description: "Model operations example - triggers model management test"

  - pattern: "examples/model_management/async_model_operations.py"
    categories:
      - "async_model_operations"
    description: "Async model operations example - triggers async model test"

  # Notes API ç¤ºä¾‹
  - pattern: "examples/notes_api/basic_notes.py"
    categories:
      - "notes_api"
    description: "Basic notes example - triggers notes API test"

  # Prompts API ç¤ºä¾‹
  - pattern: "examples/prompts_api/basic_prompts.py"
    categories:
      - "prompts_api"
    description: "Basic prompts example - triggers prompts API test"

  - pattern: "examples/prompts_api/advanced_prompts.py"
    categories:
      - "prompts_api"
    description: "Advanced prompts example - triggers prompts API test"

  # RAG Knowledge ç¤ºä¾‹
  - pattern: "examples/rag_knowledge/file_rag.py"
    categories:
      - "rag_integration"
    description: "File RAG example - triggers RAG integration test"

  # Integration ç¤ºä¾‹
  - pattern: "examples/integration/test_integration_async_client_live.py"
    categories:
      - "async_live_client"
    description: "Async client live test - triggers async live client test"

  - pattern: "examples/integration/test_integration_async_stream_chat.py"
    categories:
      - "async_live_stream"
    description: "Async stream chat live test - triggers async live stream test"

  - pattern: "examples/integration/test_integration_async_model_ops.py"
    categories:
      - "async_live_model_ops"
    description: "Async model ops live test - triggers async live model ops test"

  - pattern: "examples/integration/test_integration_openwebui_chat_client.py"
    categories:
      - "sync_live_client"
    description: "Sync client live test - triggers sync live client test"

  - pattern: "examples/integration/test_integration_sync_stream_chat.py"
    categories:
      - "sync_live_stream"
    description: "Sync stream chat live test - triggers sync live stream test"

  - pattern: "examples/integration/test_integration_decision_model.py"
    categories:
      - "decision_model"
    description: "Decision model test - triggers decision model test"

  # ============================================================================
  # 5. æµ‹è¯•æ–‡ä»¶ - ç²¾ç¡®æ˜ å°„
  # ============================================================================
  
  - pattern: "tests/test_notes_functionality.py"
    categories:
      - "notes_api"
    description: "Notes functionality tests - triggers notes API test"

  - pattern: "tests/test_prompts_functionality.py"
    categories:
      - "prompts_api"
    description: "Prompts functionality tests - triggers prompts API test"

  - pattern: "tests/test_deep_research.py"
    categories:
      - "deep_research"
    description: "Deep research tests - triggers deep research test"

  - pattern: "tests/test_task_processing.py"
    categories:
      - "process_task"
      - "stream_process_task"
      - "decision_model"
    description: "Task processing tests - triggers task processing tests"

  - pattern: "tests/test_async_client.py"
    categories:
      - "async_basic_chat"
      - "async_live_client"
    description: "Async client tests - triggers async client tests"

  - pattern: "tests/test_chat_functionality.py"
    categories:
      - "basic_chat"
      - "sync_live_client"
    description: "Chat functionality tests - triggers chat tests"

  - pattern: "tests/test_knowledge_base.py"
    categories:
      - "rag_integration"
    description: "Knowledge base tests - triggers RAG tests"

  # ============================================================================
  # 6. é€šé…ç¬¦æ¨¡å¼ - ä½œä¸ºåå¤‡ï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰
  # ============================================================================
  
  # åªæœ‰å½“ä¸Šé¢çš„ç²¾ç¡®æ¨¡å¼éƒ½ä¸åŒ¹é…æ—¶ï¼Œæ‰ä¼šä½¿ç”¨è¿™äº›é€šé…ç¬¦
  # æ³¨æ„ï¼šè¿™äº›æ¨¡å¼åº”è¯¥éå¸¸ä¿å®ˆï¼Œé¿å…è¿‡åº¦è§¦å‘æµ‹è¯•
  
  # æ ¸å¿ƒåŒ…çš„__init__.pyå˜æ›´
  - pattern: "openwebui_chat_client/__init__.py"
    categories:
      - "connectivity"
    description: "Package init - triggers basic connectivity test"

  # é…ç½®æ–‡ä»¶å˜æ›´
  - pattern: "openwebui_chat_client/core/__init__.py"
    categories:
      - "connectivity"
    description: "Core init - triggers basic connectivity test"

  - pattern: "openwebui_chat_client/modules/__init__.py"
    categories:
      - "connectivity"
    description: "Modules init - triggers basic connectivity test"

# Default categories to run when no specific mapping is found
# This ensures that at least basic functionality is tested for any changes
default_categories:
  - "connectivity"
  - "basic_chat"
